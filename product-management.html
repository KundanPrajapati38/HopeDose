<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Product Management - HopeDose</title>
  <!-- Authentication Check Script -->
  <script src="js/auth-check.js"></script>
  <!-- Bootstrap & FontAwesome -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
  <!-- DataTables CSS -->
  <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/dataTables.bootstrap5.min.css">
  <!-- Add AOS library for scroll animations -->
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <!-- Toastify for notifications -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/product-management.css">
</head>

<body>

<!-- Include Header -->
<div id="header-placeholder"></div>



  <!-- Quick Navigation Tabs -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="card shadow-sm " data-aos="fade-up" data-aos-delay="150">
        <div class="card-body ">
          <h1 class="section-title" data-aos="fade-up">Product Management System</h1>
          <ul class="nav nav-tabs justify-content-center" id="productTabs" role="tablist">
            <li class="nav-item " role="presentation">
              <button class="nav-link active" id="entry-tab" data-bs-toggle="tab" data-bs-target="#entry-panel" type="button" role="tab" aria-controls="entry-panel" aria-selected="true">
                <i class="fas fa-plus-circle me-2"></i>Add Products
              </button>
            </li>
           
            <li class="nav-item" role="presentation">
              <a class="nav-link" href="dash&inven.html">
                <i class="fas fa-tachometer-alt me-2"></i>Inventory & <i class="fas fa-chart-line me-2"></i>Dashboard
              </a>
            </li>
            
            
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- Tab Content -->
  <div class="tab-content" id="productTabContent">
    <!-- Product Entry Tab Panel -->
    <div class="tab-pane fade show active" id="entry-panel" role="tabpanel" aria-labelledby="entry-tab">
      <div class="row">
        <!-- Product Entry Form -->
        <div class="col-lg-4 mb-4" data-aos="fade-up" data-aos-delay="200">
          <div class="custom-card p-4">
            <h3 class="mb-4 text-center">Add New Product</h3>
            <form id="productForm" class="product-form">
              <div class="mb-3">
                <label for="productName" class="form-label">Product Name</label>
                <div class="input-group">
                  <span class="input-group-text"><i class="fas fa-tag"></i></span>
                  <input type="text" class="form-control" id="productName" required>
                </div>
              </div>
              
              <div class="mb-3">
                <label for="productCategory" class="form-label">Category</label>
                <div class="input-group">
                  <span class="input-group-text"><i class="fas fa-folder"></i></span>
                  <select class="form-select" id="productCategory" required>
                    <option value="">Select Category</option>
                    <option value="Toys">Toys</option>
                    <option value="Books">Books</option>
                    <option value="Clothes">Clothes</option>
                    <option value="Food">Food</option>
                    <option value="Games Kit">Games Kit</option>
                    <option value="Medicines">Medicines</option>
                    <option value="Others">Others</option>
                  </select>
                </div>
              </div>
              
              <div class="mb-3">
                <label for="productQuantity" class="form-label">Quantity</label>
                <div class="input-group">
                  <span class="input-group-text"><i class="fas fa-cubes"></i></span>
                  <input type="number" class="form-control" id="productQuantity" min="1" required>
                </div>
              </div>
              
              <div class="mb-3">
                <label for="productCondition" class="form-label">Condition</label>
                <div class="input-group">
                  <span class="input-group-text"><i class="fas fa-star"></i></span>
                  <select class="form-select" id="productCondition" required>
                    <option value="">Select Condition</option>
                    <option value="New">New</option>
                    <option value="Like New">Like New</option>
                    <option value="Good">Good</option>
                    <option value="Fair">Fair</option>
                  </select>
                </div>
              </div>
              
              <div class="mb-3">
                <label for="productDescription" class="form-label">Description</label>
                <div class="input-group">
                  <span class="input-group-text"><i class="fas fa-align-left"></i></span>
                  <textarea class="form-control" id="productDescription" rows="3" required></textarea>
                </div>
              </div>
              
              <div class="mb-3">
                <label for="productManufactureDate" class="form-label">Manufacturing Date</label>
                <div class="input-group">
                  <span class="input-group-text"><i class="fas fa-calendar-alt"></i></span>
                  <input type="date" class="form-control" id="productManufactureDate" required>
                </div>
                <small class="text-muted">Date when the product was manufactured</small>
              </div>
              
              <div class="mb-3">
                <label for="productExpiryDate" class="form-label">Expiry Date</label>
                <div class="input-group">
                  <span class="input-group-text"><i class="fas fa-calendar-times"></i></span>
                  <input type="date" class="form-control" id="productExpiryDate" required>
                </div>
                <small class="text-muted">We'll remind you 10 days before expiry</small>
                <div class="form-check mt-2">
                  <input class="form-check-input" type="checkbox" id="noExpiryCheck">
                  <label class="form-check-label" for="noExpiryCheck">This product does not expire</label>
                </div>
              </div>
              
              <div class="d-grid gap-2">
                <button type="submit" class="btn btn-primary btn-lg">
                  <i class="fas fa-plus-circle me-2"></i>Add Product
                </button>
              </div>
            </form>
          </div>
        </div>
        
              <!-- Improved camera capture functionality -->
              <div class="col">
              <div class="mb-4">
                
                <div class="text-center mb-3">
                  <div class="btn-group" role="group">
                    <button type="button" id="startCamera" class="btn btn-outline-primary">
                      <i class="fas fa-camera me-1"></i>Start Camera
                    </button>
                    <button type="button" id="captureImage" class="btn btn-outline-success" disabled>
                      <i class="fas fa-image me-1"></i>Capture
                    </button>
                    <button type="button" id="retakeImage" class="btn btn-outline-warning" disabled>
                      <i class="fas fa-redo me-1"></i>Retake
                    </button>
                    <button type="button" id="stopCamera" class="btn btn-outline-danger" disabled>
                      <i class="fas fa-stop-circle me-1"></i>Stop
                    </button>
                  </div>
                </div>


                <div class="camera-container border rounded p-3 mb-3">                  
                  <div class="text-center PT-5">                
                      <div class="camera-placeholder mb-2" id="cameraPlaceholder">
                         <div style="padding-bottom: 20px;"><i class="fas fa-camera fa-3x text-muted"></i></div>                        <div>
                         <video id="cameraFeed" autoplay playsinline style="display: none; width: 100%;  object-fit: cover; margin: 10PX auto; border: 2px solid #007bff; border-radius: 8px; background-color: #000;"></video>
                         <canvas id="imageCanvas" style="display: none; width: 100%;  object-fit: contain; margin: 0 auto; border: 2px solid #ffffff; border-radius: 8px;"></canvas>
                      </div>
                  </div>
                </div>   
              </div>                       
                 <div id="cameraStatus" class="alert alert-info mt-2 text-center">Camera is not active</div>
              
                <!-- Alternative image upload option -->                                
                <div class="input-group mb-3">
                  <span class="input-group-text"><i class="fas fa-upload"></i></span>
                  <input type="file" class="form-control" id="productImage" accept="image/*">
                </div>
              </div>
           
             
        
        <!-- Product List moved below camera section -->
        <div class="row" data-aos="fade-up" data-aos-delay="200">
          <div class="custom-card p-4">
            <div class="d-flex justify-content-between align-items-center mb-4">
              <h3 class="mb-0">Product List</h3>
              <div class="d-flex gap-2">
                <select id="categoryFilter" class="form-select form-select-sm" style="width: auto;">
                  <option value="All">All Categories</option>
                  <option value="Toys">Toys</option>
                  <option value="Books">Books</option>
                  <option value="Clothes">Clothes</option>
                  <option value="Food">Food</option>
                  <option value="Games Kit">Games Kit</option>
                  <option value="Medicines">Medicines</option>
                  <option value="Others">Others</option>
                </select>
                <button id="saveProducts" class="btn btn-sm btn-outline-success">
                  <i class="fas fa-save me-1"></i>Save
                </button>
                <button id="clearProducts" class="btn btn-sm btn-outline-danger">
                  <i class="fas fa-trash-alt me-1"></i>Clear All
                </button>
              </div>
            </div>
            
            <div id="productList" class="product-list">
              <div class="no-products text-center py-5" id="noProductsMessage">
                <i class="fas fa-box-open fa-3x mb-3 text-muted"></i>
                <h4>No products added yet</h4>
                <p>Add your first product using the form on the left</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
   
    <!-- Dashboard Tab Panel -->
    <div class="tab-pane fade" id="dashboard-panel" role="tabpanel" aria-labelledby="dashboard-tab">
      <!-- Expiring Products Alert -->
      <div class="row mb-4">
        <div class="col-12">
          <div id="expiring-products-alert" class="alert alert-warning d-none" role="alert">
            <h4 class="alert-heading"><i class="fas fa-exclamation-triangle me-2"></i>Products Expiring Soon!</h4>
            <p>The following products will expire within the next 10 days:</p>
            <ul id="expiring-products-list"></ul>
          </div>
        </div>
      </div>

      <!-- Dashboard Stats -->
      <div class="row mb-4">
        <div class="col-md-3 mb-3" data-aos="fade-up">
          <div class="stats-card bg-primary text-white">
            <div class="stats-icon">
              <i class="fas fa-boxes"></i>
            </div>
            <div class="stats-info">
              <h3 id="total-products">0</h3>
              <p>Total Products</p>
            </div>
            <div class="stats-progress">
              <div class="progress">
                <div class="progress-bar" role="progressbar" style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-3 mb-3" data-aos="fade-up" data-aos-delay="100">
          <div class="stats-card bg-success text-white">
            <div class="stats-icon">
              <i class="fas fa-check-circle"></i>
            </div>
            <div class="stats-info">
              <h3 id="active-products">0</h3>
              <p>Active Products</p>
            </div>
            <div class="stats-progress">
              <div class="progress">
                <div class="progress-bar bg-success" role="progressbar" style="width: 75%" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-3 mb-3" data-aos="fade-up" data-aos-delay="200">
          <div class="stats-card bg-warning text-dark">
            <div class="stats-icon">
              <i class="fas fa-exclamation-triangle"></i>
            </div>
            <div class="stats-info">
              <h3 id="expiring-soon">0</h3>
              <p>Expiring Soon</p>
            </div>
            <div class="stats-progress">
              <div class="progress">
                <div class="progress-bar bg-warning" role="progressbar" style="width: 35%" aria-valuenow="35" aria-valuemin="0" aria-valuemax="100"></div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-3 mb-3" data-aos="fade-up" data-aos-delay="300">
          <div class="stats-card bg-danger text-white">
            <div class="stats-icon">
              <i class="fas fa-calendar-times"></i>
            </div>
            <div class="stats-info">
              <h3 id="expired-products">0</h3>
              <p>Expired Products</p>
            </div>
            <div class="stats-progress">
              <div class="progress">
                <div class="progress-bar bg-danger" role="progressbar" style="width: 15%" aria-valuenow="15" aria-valuemin="0" aria-valuemax="100"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="row mb-4">
        <div class="col-12" data-aos="fade-up" data-aos-delay="600">
          <div class="card shadow-sm">
            <div class="card-header bg-white">
              <h5 class="mb-0">Quick Actions</h5>
            </div>
            <div class="card-body">
              <div class="d-flex flex-wrap gap-2">
                <button class="btn btn-primary" id="add-product-btn">
                  <i class="fas fa-plus me-1"></i> Add Product
                </button>
                <button class="btn btn-success" id="export-csv">
                  <i class="fas fa-file-export me-1"></i> Export CSV
                </button>
                <button class="btn btn-info text-white" id="refresh-data">
                  <i class="fas fa-sync-alt me-1"></i> Refresh Data
                </button>
                <button class="btn btn-warning" id="show-expiring">
                  <i class="fas fa-exclamation-circle me-1"></i> View Expiring
                </button>
                <button class="btn btn-danger" id="manage-expired">
                  <i class="fas fa-trash-alt me-1"></i> Manage Expired
                </button>
              
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Recent Entries -->
      <div class="row mb-4">
        <div class="col-12" data-aos="fade-up" data-aos-delay="700">
          <div class="card shadow-sm">
            <div class="card-header bg-white">
              <h5 class="mb-0">Recent Entries</h5>
            </div>
            <div class="card-body">
              <div id="no-entries" class="text-center py-4">
                <i class="fas fa-inbox fa-3x mb-3 text-muted"></i>
                <p>No recent entries found</p>
              </div>
              <div id="recent-entries" class="recent-entries"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Product Table -->
      <div class="row">
        <div class="col-12" data-aos="fade-up" data-aos-delay="800">
          <div class="card shadow-sm">
            <div class="card-header bg-white d-flex justify-content-between align-items-center">
              <h5 class="mb-0">Product Inventory</h5>
              <div class="d-flex gap-2">
                <div class="input-group">
                  <input type="text" class="form-control" id="search-input" placeholder="Search products...">
                  <button class="btn btn-primary" type="button" id="search-btn">
                    <i class="fas fa-search"></i>
                  </button>
                </div>
                <div class="input-group">
                  <span class="input-group-text"><i class="fas fa-filter"></i></span>
                  <select class="form-select form-select-sm" id="category-filter">
                    <option value="all">All Categories</option>
                    <option value="Toys">Toys</option>
                    <option value="Books">Books</option>
                    <option value="Clothes">Clothes</option>
                    <option value="Food">Food</option>
                    <option value="Games Kit">Games Kit</option>
                    <option value="Medicines">Medicines</option>
                    <option value="Others">Others</option>
                  </select>
                </div>
              </div>
            </div>
            <div class="card-body">
              <div class="table-responsive">
                <table id="products-table" class="table table-striped table-hover">
                  <thead>
                    <tr>
                      <th>Product Name</th>
                      <th>Category</th>
                      <th>Quantity</th>
                      <th>Expiry Date</th>
                      <th>Days Remaining</th>
                      <th>Status</th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody id="products-table-body">
                    <!-- Table will be populated by JavaScript -->
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Inventory Tab Panel -->
    <div class="tab-pane fade" id="inventory-panel" role="tabpanel" aria-labelledby="inventory-tab">
      <div class="row mb-4">
        <div class="col-12">
          <div class="card shadow-sm">
            <div class="card-header bg-white d-flex justify-content-between align-items-center">
              <h5 class="mb-0">Inventory Management</h5>
              <div class="input-group" style="width: auto;">
                <input type="text" class="form-control" id="inventory-search" placeholder="Search products...">
                <button class="btn btn-primary" type="button" id="inventory-search-btn">
                  <i class="fas fa-search"></i>
                </button>
              </div>
            </div>
            <div class="card-body">
              <div class="row">
                <div class="col-md-3 mb-4">
                  <div class="card inventory-category-card">
                    <div class="card-body text-center">
                      <div class="inventory-icon toys-icon">
                        <i class="fas fa-gamepad"></i>
                      </div>
                      <h5 class="mt-3">Toys</h5>
                      <p class="inventory-count" id="toys-count">0 items</p>
                    </div>
                  </div>
                </div>
                <div class="col-md-3 mb-4">
                  <div class="card inventory-category-card">
                    <div class="card-body text-center">
                      <div class="inventory-icon books-icon">
                        <i class="fas fa-book"></i>
                      </div>
                      <h5 class="mt-3">Books</h5>
                      <p class="inventory-count" id="books-count">0 items</p>
                    </div>
                  </div>
                </div>
                <div class="col-md-3 mb-4">
                  <div class="card inventory-category-card">
                    <div class="card-body text-center">
                      <div class="inventory-icon clothes-icon">
                        <i class="fas fa-tshirt"></i>
                      </div>
                      <h5 class="mt-3">Clothes</h5>
                      <p class="inventory-count" id="clothes-count">0 items</p>
                    </div>
                  </div>
                </div>
                <div class="col-md-3 mb-4">
                  <div class="card inventory-category-card">
                    <div class="card-body text-center">
                      <div class="inventory-icon food-icon">
                        <i class="fas fa-utensils"></i>
                      </div>
                      <h5 class="mt-3">Food</h5>
                      <p class="inventory-count" id="food-count">0 items</p>
                    </div>
                  </div>
                </div>
                <div class="col-md-3 mb-4">
                  <div class="card inventory-category-card">
                    <div class="card-body text-center">
                      <div class="inventory-icon games-icon">
                        <i class="fas fa-futbol"></i>
                      </div>
                      <h5 class="mt-3">Games Kit</h5>
                      <p class="inventory-count" id="games-count">0 items</p>
                    </div>
                  </div>
                </div>
                <div class="col-md-3 mb-4">
                  <div class="card inventory-category-card">
                    <div class="card-body text-center">
                      <div class="inventory-icon medicines-icon">
                        <i class="fas fa-pills"></i>
                      </div>
                      <h5 class="mt-3">Medicines</h5>
                      <p class="inventory-count" id="medicines-count">0 items</p>
                    </div>
                  </div>
                </div>
                <div class="col-md-3 mb-4">
                  <div class="card inventory-category-card">
                    <div class="card-body text-center">
                      <div class="inventory-icon others-icon">
                        <i class="fas fa-box-open"></i>
                      </div>
                      <h5 class="mt-3">Others</h5>
                      <p class="inventory-count" id="others-count">0 items</p>
                    </div>
                  </div>
                </div>
                <div class="col-md-3 mb-4">
                  <div class="card inventory-category-card add-category-card">
                    <div class="card-body text-center">
                      <div class="inventory-icon add-icon">
                        <i class="fas fa-plus"></i>
                      </div>
                      <h5 class="mt-3">Add Category</h5>
                      <p class="inventory-count">Create new</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Barcode Scanner -->
      <div class="row mb-4">
        <div class="col-12">
          <div class="card shadow-sm">
            <div class="card-header bg-white">
              <h5 class="mb-0">Barcode Scanner</h5>
            </div>
            <div class="card-body">
              <div class="row">
                <div class="col-md-6">
                  <div class="mb-3">
                    <div class="input-group">
                      <input type="text" class="form-control" id="barcode-input" placeholder="Enter barcode manually...">
                      <button class="btn btn-primary" type="button" id="search-barcode">
                        <i class="fas fa-search"></i> Search
                      </button>
                    </div>
                  </div>
                  <div class="mb-3">
                    <button id="start-scanner" class="btn btn-success me-2">
                      <i class="fas fa-camera"></i> Start Camera
                    </button>
                    <button id="stop-scanner" class="btn btn-danger" disabled>
                      <i class="fas fa-stop-circle"></i> Stop Scanner
                    </button>
                  </div>
                  <div class="scanner-container mb-3">
                    <div id="scanner-placeholder" class="scanner-placeholder text-center p-4 border rounded">
                      <i class="fas fa-barcode fa-3x mb-3 text-muted"></i>
                      <p>Click "Start Camera" to scan a barcode</p>
                    </div>
                    <div id="scanner-viewfinder" class="d-none">
                      <!-- Scanner will be initialized here -->
                    </div>
                    <div id="scanner-status" class="alert alert-info mt-2">Scanner inactive</div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div id="scan-result" class="scan-result d-none">
                    <div class="card">
                      <div class="card-header bg-success text-white">
                        <h5 class="mb-0">Product Found</h5>
                      </div>
                      <div class="card-body">
                        <h4 id="result-name" class="mb-2"></h4>
                        <p id="result-barcode" class="mb-2 text-muted"></p>
                        <div class="mb-3">
                          <span id="result-status" class="badge bg-success">Active</span>
                        </div>
                        <div class="row mb-3">
                          <div class="col-6">
                            <p class="mb-1"><strong>Category:</strong></p>
                            <p id="result-category"></p>
                          </div>
                          <div class="col-6">
                            <p class="mb-1"><strong>Quantity:</strong></p>
                            <p id="result-quantity"></p>
                          </div>
                        </div>
                        <div class="row mb-3">
                          <div class="col-6">
                            <p class="mb-1"><strong>Manufacture Date:</strong></p>
                            <p id="result-manufacture-date"></p>
                          </div>
                          <div class="col-6">
                            <p class="mb-1"><strong>Expiry Date:</strong></p>
                            <p id="result-expiry-date"></p>
                          </div>
                        </div>
                        <p class="mb-1"><strong>Description:</strong></p>
                        <p id="result-description" class="mb-3"></p>
                        <div class="d-flex gap-2">
                          <button id="edit-scanned-product" class="btn btn-primary">
                            <i class="fas fa-edit"></i> Edit
                          </button>
                          <button id="add-quantity" class="btn btn-success">
                            <i class="fas fa-plus"></i> Add Qty
                          </button>
                          <button id="remove-quantity" class="btn btn-warning">
                            <i class="fas fa-minus"></i> Remove Qty
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Include Footer -->
<div id="footer-placeholder"></div>
      <!-- jQuery -->
      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
      <!-- Bootstrap JS -->
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
      <!-- DataTables JS -->
      <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
      <script src="https://cdn.datatables.net/1.11.5/js/dataTables.bootstrap5.min.js"></script>
      <!-- AOS Animation Library -->
      <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
      <!-- QuaggaJS for barcode scanning -->
      <script src="https://cdn.jsdelivr.net/npm/@ericblade/quagga2/dist/quagga.min.js"></script>
      <!-- Custom JS -->
      <script src="js/main.js"></script>
      <script src="js/component-loader.js"></script>
      <script src="js/product-management.js"></script>

      <script>
        // Load Header/footer component
        fetch('components/header.html')
    .then(response => response.text())
    .then(data => {
      document.getElementById('header-placeholder').innerHTML = data;
      // After loading header, update active link
      setTimeout(() => {
      
        document.querySelector('a[href="index.html"]').classList.remove('active');
      }, 100);
    });
        fetch('components/footer.html')
    .then(response => response.text())
    .then(data => {
      document.getElementById('footer-placeholder').innerHTML = data;
    });
      </script>
      </body>
      </html>
